

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>15. Relations as Graphs - Network Analysis &#8212; MA346 Course Notes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/sphinx-book-theme.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/mystnb.js"></script>
    <script src="_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://nathancarter.github.io/ma346-course-notes/chapter-15-networks.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="16. Relations as Matrices" href="chapter-16-matrices.html" />
    <link rel="prev" title="14. Dashboards" href="chapter-14-dashboards.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">


<!-- Opengraph tags -->
<meta property="og:url"         content="https://nathancarter.github.io/ma346-course-notes/chapter-15-networks.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Relations as Graphs - Network Analysis" />
<meta property="og:description" content="Relations as Graphs - Network Analysis  &lt;a href=&#34;../../_slides/chapter-15-slides.html&#34;&gt;See also the slides that summarize a portion of this content.&lt;/a&gt;  What i" />
<meta property="og:image"       content="https://nathancarter.github.io/ma346-course-notes/_static/logo.png" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">MA346 Course Notes</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-1-intro-to-data-science.html">
   1. Introduction to Data Science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-2-mathematical-foundations.html">
   2. Mathematical Foundations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-3-jupyter.html">
   3. Jupyter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-4-review-of-python-and-pandas.html">
   4. Review of Python and pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-5-before-and-after.html">
   5. Before and After
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-6-single-table-verbs.html">
   6. Single-Table Verbs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-7-abstraction.html">
   7. Abstraction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-8-version-control.html">
   8. Version Control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-9-math-and-stats.html">
   9. Mathematics and Statistics in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-10-visualization.html">
   10. Visualization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-11-processing-rows.html">
   11. Processing the Rows of a DataFrame
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-12-concat-and-merge.html">
   12. Concatenating and Merging DataFrames
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-13-etl.html">
   13. Miscellaneous Munging Methods (ETL)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-14-dashboards.html">
   14. Dashboards
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   15. Relations as Graphs - Network Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-16-matrices.html">
   16. Relations as Matrices
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-17-machine-learning.html">
   17. Introduction to Machine Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="course-schedule.html">
   18. Detailed Course Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="big-cheat-sheet.html">
   19. Big Cheat Sheet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="anaconda-installation.html">
   20. Anaconda Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="vs-code-installation.html">
   21. VS Code for Python Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="GB213-review-in-Python.html">
   22. GB213 Review in Python
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/chapter-15-networks.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> On this page
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-a-graph">
   15.1. What is a graph?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#storing-graphs-in-tables">
   15.2. Storing graphs in tables
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-network-data">
   15.3. Loading network data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dolphin-dataset">
     15.3.1. Dolphin dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-s-networkx-module">
     15.3.2. Python’s NetworkX module
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#computations-on-graphs">
   15.4. Computations on graphs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualization-of-graphs">
   15.5. Visualization of graphs
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#drawing-the-dolphin-network">
     15.5.1. Drawing the dolphin network
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#better-drawing-tools">
     15.5.2. Better drawing tools
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#drawing-larger-networks">
     15.5.3. Drawing larger networks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#directed-draphs-in-networkx">
   15.6. Directed draphs in NetworkX
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="relations-as-graphs-network-analysis">
<h1><span class="section-number">15. </span>Relations as Graphs - Network Analysis<a class="headerlink" href="#relations-as-graphs-network-analysis" title="Permalink to this headline">¶</a></h1>
<p><a href="../../_slides/chapter-15-slides.html">See also the slides that summarize a portion of this content.</a></p>
<div class="section" id="what-is-a-graph">
<h2><span class="section-number">15.1. </span>What is a graph?<a class="headerlink" href="#what-is-a-graph" title="Permalink to this headline">¶</a></h2>
<p>In mathematics, the word <em>graph</em> has two meanings.  The more common one is what most people learned in algebra class, which is the graph of a function, on the ordinary Cartesian plane of <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> axes.  The less common meaning is a visualization of an interconnected network of objects.  In such a network, the objects being connected are called <em>nodes</em> or <em>vertices,</em> and the connections are called <em>edges,</em> <em>arrows,</em> or <em>links.</em>  While we call it a graph in mathematics, data scientists might refer to it instead as <em>network data.</em></p>
<p>Let’s start with a small, pretend example.  Let’s say we spoke to five friends and asked them which of the others they’d turn to for advice about an important life decision.  We could depict their answers with a picture like the following.</p>
<p><img alt="Image of five ovals, labeled Augustus, Beatriz, Cyrano, Dauphine, Englebert, some connected in pairs by arrows" src="_images/friends-graph.png" /></p>
<p>In that image, the five friends are shown in ovals; these are the vertices of the graph.  The connections among them are the edges of the graph, representing the friends’ answers to the question about advice.  For instance, the arrow from Augustus to Cyrano says that Augustus would consult Cyrano when needing advice about an important life decision, but the absence of an arrow from Beatriz to Englebert means that she would not consult him.</p>
<p>Now that we’ve seen a small (but pretend) example, let’s consider some more realistic examples.</p>
<ul class="simple">
<li><p>To prepare for class, you were asked to consider a spreadsheet recording shipping records between every two U.S. states in the year 1997.  In that data, the vertices were the 50 states and the edges were the records of how much money/weight of goods were shipped.</p></li>
<li><p>In today’s notes, we’ll also look at a spreadsheet created by marine biologists recording the interaction among a community of dolphins living off Doubtful Sound in New Zealand.  The vertices of that network are the dolphins and the edges represent social interactions among them.  (The data comes from <a class="reference external" href="http://www-personal.umich.edu/~mejn/netdata/">Mark Newman’s website</a>, which cites the biologists who collected it.)</p></li>
<li><p>One of the largest examples of network data has as its vertices the collection of all pages on the internet, and edges are links between them.  Google does linear algebra-based computations on this enormous graph regularly, to update their search engine to reflect the latest changes on the web.</p></li>
</ul>
<div class="alert alert-primary admonition">
<p class="admonition-title">Big Picture</p>
<p>Notice that a graph is nothing but a picture representing a <em>binary relation,</em> a term we first defined in <a class="reference internal" href="chapter-2-mathematical-foundations.html"><span class="doc">the notes on Chapter 2</span></a>.  In the case of a graph, the two sets involved in the relation are the same; we’re connecting friends to friends in the picture above, or states to states with shipping information, or pages to pages with hyperlinks.  In a graph, the relation connects the set of vertices to itself, rather than to some other set.</p>
</div>
<p>The graph of five friends shown above is a <em>directed graph,</em> because the edges have arrowheads to indicate that they make sense in only one direction.  While Augustus said he would seek advice from Cyrano, Cyrano did not say the same about Augustus.</p>
<p>In an <em>undirected graph,</em> every connection goes in both directions.  For instance, the relation recorded in the dolphin data is about spending time together.  If dolphin A is spending time with dolphin B, then the reverse is obviously also true.  So in the dolphin data, all connections go in both directions, and we can thus draw them without arrowheads; they are all “two-way streets.”</p>
</div>
<div class="section" id="storing-graphs-in-tables">
<h2><span class="section-number">15.2. </span>Storing graphs in tables<a class="headerlink" href="#storing-graphs-in-tables" title="Permalink to this headline">¶</a></h2>
<p>In our course, we store almost all of our data in tables, such as pandas DataFrames, CSV files, etc.  How can a graph be represented in a table?  There are two primary ways.</p>
<p>First, we can use an <em>adjacency matrix,</em> which is a table that tells which vertices are adjacent.  Its row headings are the vertices in the network, and the column headings are the same vertices again.  Each entry says whether the row connects to the column.  Here’s the adjacency matrix for the five friends graph shown above.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>Augustus</p></th>
<th class="head"><p>Beatriz</p></th>
<th class="head"><p>Cyrano</p></th>
<th class="head"><p>Dauphine</p></th>
<th class="head"><p>Englebert</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Augustus</strong></p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Beatriz</strong></p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><strong>Cyrano</strong></p></td>
<td><p>False</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Dauphine</strong></p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><strong>Englebert</strong></p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
<p>Order is important here.  If we want to know whether Augustus <span class="math notranslate nohighlight">\(\to\)</span> Cyrano, we must look in the Augustus <strong>row</strong> and the Cyrano <strong>column.</strong>  (This is not hard to remember, because the row headings are actually visually to the left of the column headings, which fits the “row <span class="math notranslate nohighlight">\(\to\)</span> column” orientation of the arrow.)</p>
<p>Alternately, we could represent a relation the way we’ve discussed in the past.  We can just store in a table the list of pairs that make up the relation.  Each row in such a table represents an arrow in the graph.  For the five friends, that table looks like the following.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>From</p></th>
<th class="head"><p>To</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Augustus</p></td>
<td><p>Cyrano</p></td>
</tr>
<tr class="row-odd"><td><p>Beatriz</p></td>
<td><p>Cyrano</p></td>
</tr>
<tr class="row-even"><td><p>Cyrano</p></td>
<td><p>Beatriz</p></td>
</tr>
<tr class="row-odd"><td><p>Cyrano</p></td>
<td><p>Englebert</p></td>
</tr>
<tr class="row-even"><td><p>Dauphine</p></td>
<td><p>Cyrano</p></td>
</tr>
<tr class="row-odd"><td><p>Englebert</p></td>
<td><p>Augustus</p></td>
</tr>
<tr class="row-even"><td><p>Englebert</p></td>
<td><p>Beatriz</p></td>
</tr>
</tbody>
</table>
<p>We will call this kind of table a <em>list of ordered pairs,</em> because the ordering of each pair often matters.  From Augustus to Cyrano is not the same as from Cyrano to Augustus.  We can also call it an <em>edge list,</em> because the connections in a graph are called edges.</p>
<div class="alert alert-primary admonition">
<p class="admonition-title">Big Picture</p>
<p>These two ways to store the data are very related.  If we just imagine a third column for this last table, “From,” “To,” and “Connected (True/False),” then the two tables could be converted from one to the other using pivot and melt from <a class="reference internal" href="chapter-6-single-table-verbs.html"><span class="doc">Chapter 6 of the course notes</span></a>.  In that chapter, we learned that it is typically easier for a computer to process melted (tall) data, but easier for humans to read pivoted (wide) data.  To make our computations easier, we will work with this second, two-column form.</p>
</div>
<p>But storing network data as a table of edges does have one small disadvantage:  It doesn’t make it obvious what the complete set of vertices is.  For instance, just given the second (tall) table shown above, we can’t be sure how many friends there are.  Is it just these five, or is there a sixth friend, or a seventh?  Imagine another friend, Fatima, who has unusual opinions, so she wouldn’t go to any of the friends for advice, nor would they go to her.  She wouldn’t show up in any of the edges, so we wouldn’t see her in the data.</p>
<p>Thus if we store a graph as an edge list, we will also need a separate list of the graph’s vertices.  That list will include every vertex mentioned in the edge list, and possibly some others.</p>
</div>
<div class="section" id="loading-network-data">
<h2><span class="section-number">15.3. </span>Loading network data<a class="headerlink" href="#loading-network-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dolphin-dataset">
<h3><span class="section-number">15.3.1. </span>Dolphin dataset<a class="headerlink" href="#dolphin-dataset" title="Permalink to this headline">¶</a></h3>
<p>I’ve included the dolphin community data with these course notes.  <a href='../../_static/dolphins.xlsx'>You can download it here</a> (as an Excel workbook).  I’ll explore it below to show you how it’s structured.</p>
<p>First, what sheets are stored in the workbook?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">sheets</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span> <span class="s1">&#39;_static/dolphins.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
<span class="n">sheets</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;ids_and_names&#39;, &#39;relationships&#39;])
</pre></div>
</div>
</div>
</div>
<p>There are two sheets in the workbook, one called <code class="docutils literal notranslate"><span class="pre">&quot;ids_and_names&quot;</span></code> and one called <code class="docutils literal notranslate"><span class="pre">&quot;relationships&quot;</span></code>.  Let’s take a look at both.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">sheets</span><span class="p">[</span><span class="s1">&#39;ids_and_names&#39;</span><span class="p">]</span>
<span class="n">df1</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>Beak</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Beescratch</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Bumper</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>CCL</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>Cross</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">sheets</span><span class="p">[</span><span class="s1">&#39;relationships&#39;</span><span class="p">]</span>
<span class="n">df2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>source</th>
      <th>target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>8</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>It seems as if the first sheet gives each dolphin, by name, a unique ID, while the second sheet shows the social connections of which dolphins spend time with which other ones.  This is just how we discussed storing the data above; there is a list of vertices in the first table and a list of edges in the second table.</p>
<p>But the data is not formatted conveniently.  The second table would be more convenient if it included dolphin names instead of IDs.  Let’s use Python dictionaries and <code class="docutils literal notranslate"><span class="pre">map()</span></code> to fix it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">convert_id_to_name</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> <span class="nb">zip</span><span class="p">(</span> <span class="n">df1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">df1</span><span class="o">.</span><span class="n">name</span> <span class="p">)</span> <span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">map</span><span class="p">(</span> <span class="n">convert_id_to_name</span> <span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">map</span><span class="p">(</span> <span class="n">convert_id_to_name</span> <span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>source</th>
      <th>target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Double</td>
      <td>CCL</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Feather</td>
      <td>DN16</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Feather</td>
      <td>DN21</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Fish</td>
      <td>Beak</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Fish</td>
      <td>Bumper</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="python-s-networkx-module">
<h3><span class="section-number">15.3.2. </span>Python’s NetworkX module<a class="headerlink" href="#python-s-networkx-module" title="Permalink to this headline">¶</a></h3>
<p>Your Anaconda installation came with the <code class="docutils literal notranslate"><span class="pre">networkx</span></code> module for working with network data in Python.  If you have a non-Anaconda setup on your machine, or you plan to work in a cloud provider that doesn’t have it installed by default, you can install it with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">networkx</span></code>.  The standard way to import it is using the abbreviation <code class="docutils literal notranslate"><span class="pre">nx</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
</pre></div>
</div>
</div>
</div>
<p>This module lets us turn tables of data (like the edge list for dolphins we just saw) into Python <code class="docutils literal notranslate"><span class="pre">Graph</span></code> objects, which we can use for both computation and visualization.  The first step in creating a <code class="docutils literal notranslate"><span class="pre">Graph</span></code> object is always the same; just call the <code class="docutils literal notranslate"><span class="pre">nx.Graph()</span></code> function and it will create a new, empty graph with no vertices and no edges.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dolphins</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We will now add vertices and edges to that graph.  Let’s start with the vertices.  Each NetworkX <code class="docutils literal notranslate"><span class="pre">Graph</span></code> object lets you add vertices with the function <code class="docutils literal notranslate"><span class="pre">.add_nodes_from(your_list)</span></code>.  We will use that function to add all the dolphin names to our graph.  We can even check the size of the graph to be sure it worked.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dolphins</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span> <span class="n">df1</span><span class="o">.</span><span class="n">name</span> <span class="p">)</span>  <span class="c1"># the column of all dolphin names</span>
<span class="nb">len</span><span class="p">(</span> <span class="n">dolphins</span> <span class="p">)</span>                      <span class="c1"># how many nodes do we have now?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>62
</pre></div>
</div>
</div>
</div>
<p>Similarly, we can add edges with the function <code class="docutils literal notranslate"><span class="pre">.add_edges_from(your_list)</span></code>, but the list must be a list of ordered pairs.  For instance, in our dolphin data case, we’d want it to be something like <code class="docutils literal notranslate"><span class="pre">[('Double','CCL'),('Feather,DN16'),('Feather','DN21'),...]</span></code> and so on.  But we don’t want to have to type out the entire dolphin relationships table as ordered pairs; it’s too big!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span> <span class="n">df2</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>159
</pre></div>
</div>
</div>
</div>
<p>Fortunately, we can use the same trick we do when creating a dictionary from two columns.  Recall that <code class="docutils literal notranslate"><span class="pre">zip()</span></code> takes two columns and converts them into a list of pairs; we often used this to create a dictionary with the trick <code class="docutils literal notranslate"><span class="pre">dict(zip(df.col1,df.col2))</span></code>.  We can use it with <code class="docutils literal notranslate"><span class="pre">list()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">dict()</span></code> to create a list of the ordered pairs rather than a dictionary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span> <span class="nb">zip</span><span class="p">(</span> <span class="n">df2</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">df2</span><span class="o">.</span><span class="n">target</span> <span class="p">)</span> <span class="p">)</span>  <span class="c1"># get the list of edges</span>
<span class="n">edges</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>                                     <span class="c1"># see if we did it right</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>[(&#39;Double&#39;, &#39;CCL&#39;),
 (&#39;Feather&#39;, &#39;DN16&#39;),
 (&#39;Feather&#39;, &#39;DN21&#39;),
 (&#39;Fish&#39;, &#39;Beak&#39;),
 (&#39;Fish&#39;, &#39;Bumper&#39;),
 (&#39;Gallatin&#39;, &#39;DN16&#39;),
 (&#39;Gallatin&#39;, &#39;DN21&#39;),
 (&#39;Gallatin&#39;, &#39;Feather&#39;),
 (&#39;Grin&#39;, &#39;Beak&#39;),
 (&#39;Grin&#39;, &#39;CCL&#39;)]
</pre></div>
</div>
</div>
</div>
<p>It looks like we did.  Let’s add these to the dolphin graph.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dolphins</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span> <span class="n">edges</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We now have our dolphin data loaded into a NetworkX <code class="docutils literal notranslate"><span class="pre">Graph</span></code> object.  This enables both computation and visualization, and we’ll consider each of those in its own section, below.</p>
</div>
</div>
<div class="section" id="computations-on-graphs">
<h2><span class="section-number">15.4. </span>Computations on graphs<a class="headerlink" href="#computations-on-graphs" title="Permalink to this headline">¶</a></h2>
<p>There are a great many computations that can be done on graphs; we will only scratch the surface here.  You can learn more about graphs in MA267 at Bentley, and you can learn more about the capabilities of the NetworkX module through its documentation, <a class="reference external" href="https://networkx.github.io/documentation/">here</a>.  But this section gives a few example computations that make sense for network data.</p>
<p>We can ask how dense the network is, which is a measure of what proportion of its possible connections it actually has.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">density</span><span class="p">(</span> <span class="n">dolphins</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0.08408249603384453
</pre></div>
</div>
</div>
</div>
<p>Of all the possible social relationships among the dolphins (every possible pair that might hang out together), this network has only about 8.4% of those connections.</p>
<p>The number of connections any one particular dolphin has is called the <em>degree</em> of that vertex.  We can ask for a histogram of the degrees across the network.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">degree_histogram</span><span class="p">(</span> <span class="n">dolphins</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>[0, 9, 6, 6, 5, 8, 8, 7, 4, 4, 2, 2, 1]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">degrees</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">degree_histogram</span><span class="p">(</span> <span class="n">dolphins</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span> <span class="n">x</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">degrees</span><span class="p">)),</span> <span class="n">height</span><span class="o">=</span><span class="n">degrees</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span> <span class="s1">&#39;Number of friends, x&#39;</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span> <span class="s1">&#39;Number dolphins with x friends&#39;</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span> <span class="s1">&#39;Degree histogram for dolphin network&#39;</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/chapter-15-networks_27_0.png" src="_images/chapter-15-networks_27_0.png" />
</div>
</div>
<p>As you can see, no dolphin had zero friends, and thus we know that all dolphins appeared in some edge in the network.</p>
<p>We see that some dolphins had many more social associations.  If this were a network of humans, we might ask which people were the most influential in the social network.  There are many ways to measure influencce.  One way is by a notion called “betweenness,” which considers all the paths through which information might flow in a network, and asks which vertices are on the largest proportion of those paths.  This measure is called “betweenness centrality” and can be used to rank the vertices in a network by a measure of their importance.</p>
<p>Although it doesn’t make a lot of sense to measure this for dolphins (as opposed to humans), the code below illustrates how do to the computation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">betweenness_centrality</span><span class="p">(</span> <span class="n">dolphins</span> <span class="p">)</span>  <span class="c1"># this is a big dictionary</span>
<span class="n">bc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="n">bc</span> <span class="p">)</span>                        <span class="c1"># now it&#39;s a pandas Series</span>
<span class="n">bc</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>    <span class="c1"># let&#39;s see the top values</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>SN100         0.248237
Beescratch    0.213324
SN9           0.143150
SN4           0.138570
DN63          0.118239
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Although the particular numbers don’t have units we can easily interpret, higher numbers are vertices that sit along a higher proportion of the network’s pathways.  There are many other ways to measure important nodes in a network; these are called centrality measures, and the full list of ways that NetworkX supports them appears <a class="reference external" href="https://networkx.github.io/documentation/stable/reference/algorithms/centrality.html">here</a>.</p>
<p>Let us turn now to how we can visualize the dolphin network.</p>
</div>
<div class="section" id="visualization-of-graphs">
<h2><span class="section-number">15.5. </span>Visualization of graphs<a class="headerlink" href="#visualization-of-graphs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="drawing-the-dolphin-network">
<h3><span class="section-number">15.5.1. </span>Drawing the dolphin network<a class="headerlink" href="#drawing-the-dolphin-network" title="Permalink to this headline">¶</a></h3>
<p>The NetworkX module has a small number of graph-drawing features, but they will be sufficient for our needs here.  The simplest method is to just call <code class="docutils literal notranslate"><span class="pre">nx.draw(</span> <span class="pre">your_graph</span> <span class="pre">)</span></code>, but there are many options to help make it more attractive.  The simplest form of the dolphin network looks like this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span> <span class="n">dolphins</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/chapter-15-networks_32_0.png" src="_images/chapter-15-networks_32_0.png" />
</div>
</div>
<p>While this shows us the general structure of the 62 dolphins involved, there’s a lot it doesn’t answer.  But first, let’s notice what we can from this picture.</p>
<p>On one side of the graph, we see a dense cluster of about 20-30 dolphins who seem very social, and interact with one another more than most other dolphins in the network.  There is a smaller cluster of about 10 or so on the other side that are also densely connected.  Other than that, most dolphins have relatively few social connections.  The dolphins in the center are an indirect social bridge between the two groups.  But which dolphins are they?  The vertices in the graph aren’t labeled.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">nx.draw()</span></code> function takes many optional parameters, and you can see them all <a class="reference external" href="https://networkx.github.io/documentation/stable/reference/generated/networkx.drawing.nx_pylab.draw_networkx.html">here</a>.  In this case, we might want to label the vertices with the name of the dolphin, and increase the size of the figure.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="p">)</span>  <span class="c1"># 10in x 10in</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span> <span class="n">dolphins</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_weight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/chapter-15-networks_34_0.png" src="_images/chapter-15-networks_34_0.png" />
</div>
</div>
<p>Because it is often difficult to lay out a graph in an attractive way on a two-dimensional drawing, there is some random experimentation involved in most network drawing algorithms, including the one used by NetworkX.  So we see that the layout of the vertices is not exactly the same.  The two clusters of dolphins may not be laid out in the same locations or orientations in this graph and in the previous one.  In fact, every time I run the code, it looks a little different!</p>
</div>
<div class="section" id="better-drawing-tools">
<h3><span class="section-number">15.5.2. </span>Better drawing tools<a class="headerlink" href="#better-drawing-tools" title="Permalink to this headline">¶</a></h3>
<p>NetworkX emphasizes that there are much more powerful graph-drawing software packages available.  For instance, you might download <a class="reference external" href="https://gephi.org/">Gephi</a> or <a class="reference external" href="https://cytoscape.org/">Cytoscape</a> if you need to make more aesthetically pleasing images from your network data.  To export your network from Python to that software, use the following code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">write_graphml</span><span class="p">(</span> <span class="n">dolphins</span><span class="p">,</span> <span class="s1">&#39;dolphins.graphml&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>You can then import the <code class="docutils literal notranslate"><span class="pre">dolphins.graphml</span></code> file into either of those other pieces of software to visualize it more conveniently.  Similarly, if you have data exported from either of those pieces of software that you want to bring into Python for use with NetworkX, you can use the <a class="reference external" href="https://networkx.github.io/documentation/networkx-1.10/reference/generated/networkx.readwrite.graphml.read_graphml.html"><code class="docutils literal notranslate"><span class="pre">nx.read_graphml()</span></code> function</a>.</p>
</div>
<div class="section" id="drawing-larger-networks">
<h3><span class="section-number">15.5.3. </span>Drawing larger networks<a class="headerlink" href="#drawing-larger-networks" title="Permalink to this headline">¶</a></h3>
<p>The dolphin network was fairly small (62 vertices) and fairly sparse (most dolphins socializing with only a few others).  But a larger or more dense network will be much harder to visualize, because there will be too many vertices or edges to draw in a way that a human can make sense of.  We will see an example of this in class when we consider the shipping data mentioned at the start of this chapter.  In that situation, we will find it useful to sort the connections in the network based on some information about them (like the amount shipped), and draw only the most important connections.</p>
</div>
</div>
<div class="section" id="directed-draphs-in-networkx">
<h2><span class="section-number">15.6. </span>Directed draphs in NetworkX<a class="headerlink" href="#directed-draphs-in-networkx" title="Permalink to this headline">¶</a></h2>
<p>The beginning of this chapter distinguished directed graphs (like the friends network, where arrows went one way only) from undirected graphs (like the dolphins network, where each relationship was reciprocal).  To work with a directed graph into NetworkX, there are a few changes to what we learned above.</p>
<p>First, you create a directed graph not with <code class="docutils literal notranslate"><span class="pre">nx.Graph()</span></code> but with <code class="docutils literal notranslate"><span class="pre">nx.DiGraph()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friends</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>But we can add vertices and edges exactly the same way as we did with the dolphins.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friends</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span> <span class="p">[</span> <span class="s1">&#39;Augustus&#39;</span><span class="p">,</span> <span class="s1">&#39;Beatriz&#39;</span><span class="p">,</span> <span class="s1">&#39;Cyrano&#39;</span><span class="p">,</span> <span class="s1">&#39;Dauphine&#39;</span><span class="p">,</span> <span class="s1">&#39;Englebert&#39;</span> <span class="p">]</span> <span class="p">)</span>
<span class="n">friends</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;Augustus&#39;</span><span class="p">,</span> <span class="s1">&#39;Cyrano&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Beatriz&#39;</span><span class="p">,</span> <span class="s1">&#39;Cyrano&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Cyrano&#39;</span><span class="p">,</span> <span class="s1">&#39;Beatriz&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Cyrano&#39;</span><span class="p">,</span> <span class="s1">&#39;Englebert&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Dauphine&#39;</span><span class="p">,</span> <span class="s1">&#39;Cyrano&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Englebert&#39;</span><span class="p">,</span> <span class="s1">&#39;Augustus&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Englebert&#39;</span><span class="p">,</span> <span class="s1">&#39;Beatriz&#39;</span><span class="p">)</span>
<span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>However, some computations make sense only in the context of a directed graph.  For instance, we can measure the <em>reciprocity</em> of a directed graph, which asks how many of its edges are two-directional.  In the friends case, only the Beatriz<span class="math notranslate nohighlight">\(\to\)</span>Cyrano connection is reciprocated (Cyrano<span class="math notranslate nohighlight">\(\to\)</span>Beatriz); all the others are one-directional.  So we expect a low proportion as the result.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">reciprocity</span><span class="p">(</span> <span class="n">friends</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0.2857142857142857
</pre></div>
</div>
</div>
</div>
<p>There are seven edges in the network, and two of them are part of a reciprocated relationship, so the reciprocity is <span class="math notranslate nohighlight">\(\frac27\approx0.285714\)</span>.</p>
<p>We can draw directed graphs using the same tools as we used for undirected graphs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span> <span class="n">friends</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">5000</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/chapter-15-networks_43_0.png" src="_images/chapter-15-networks_43_0.png" />
</div>
</div>
<p>If you plan to use network data in your final project for this course and would like to learn more about the power of NetworkX, including both computations and visualizations, I recommend Chapter 8 of <a class="reference external" href="https://link.springer.com/book/10.1007/978-3-319-50017-1">this book</a>.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="chapter-14-dashboards.html" title="previous page"><span class="section-number">14. </span>Dashboards</a>
    <a class='right-next' id="next-link" href="chapter-16-matrices.html" title="next page"><span class="section-number">16. </span>Relations as Matrices</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Nathan Carter<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="_static/js/index.js"></script>
    
  </body>
</html>