
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4. Review of Python and pandas &#8212; MA346 Course Notes</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="canonical" href="https://nathancarter.github.io/MA346-course-notes/chapter-4-review-of-python-and-pandas.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Before and After" href="chapter-5-before-and-after.html" />
    <link rel="prev" title="3. Jupyter" href="chapter-3-jupyter.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">MA346 Course Notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Course Notes for Data Science (MA346)
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Notes
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-1-intro-to-data-science.html">
   1. Introduction to Data Science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-2-mathematical-foundations.html">
   2. Mathematical Foundations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-3-jupyter.html">
   3. Jupyter
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   4. Review of Python and pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-5-before-and-after.html">
   5. Before and After
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-6-single-table-verbs.html">
   6. Single-Table Verbs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-7-abstraction.html">
   7. Abstraction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-8-version-control.html">
   8. Version Control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-9-math-and-stats.html">
   9. Mathematics and Statistics in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-10-visualization.html">
   10. Visualization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-11-processing-rows.html">
   11. Processing the Rows of a DataFrame
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-12-concat-and-merge.html">
   12. Concatenating and Merging DataFrames
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-13-etl.html">
   13. Miscellaneous Munging Methods (ETL)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-14-dashboards.html">
   14. Dashboards
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-15-networks.html">
   15. Relations as Graphs - Network Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-16-matrices.html">
   16. Relations as Matrices
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chapter-17-machine-learning.html">
   17. Introduction to Machine Learning
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="course-schedule.html">
   1. Detailed Course Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="big-cheat-sheet.html">
   2. Big Cheat Sheet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="anaconda-installation.html">
   3. Anaconda Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="vs-code-installation.html">
   4. VS Code for Python Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="GB213-review-in-Python.html">
   5. GB213 Review in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="loyo-list.html">
   6. All Learning On Your Own Opportunities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bigpic-list.html">
   7. All Big Picture Concepts
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/chapter-4-review-of-python-and-pandas.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/nathancarter/MA346-course-notes/master?urlpath=tree/chapter-4-review-of-python-and-pandas.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python-review-1-remembering-pandas">
   4.1. Python review 1: Remembering pandas
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-a-new-column">
   4.2. Adding a new column
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-if-you-don-t-remember-cs230-very-well">
   4.3. What if you don’t remember CS230 very well?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datacamp">
     4.3.1. DataCamp
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bentley-faculty">
     4.3.2. Bentley faculty
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stack-overflow">
     4.3.3. Stack Overflow
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#o-reilly-books">
     4.3.4. O’Reilly books
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#official-documentation">
     4.3.5. Official documentation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python-review-2-mathematical-exercises">
   4.4. Python review 2: mathematical exercises
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#functional-style-code-vs-imperative-style-code">
   4.5. Functional-style code vs. imperative-style code
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="review-of-python-and-pandas">
<h1><span class="section-number">4. </span>Review of Python and pandas<a class="headerlink" href="#review-of-python-and-pandas" title="Permalink to this headline">¶</a></h1>
<p>Unlike most chapters, there are no slides corresponding to this chapter, because they consist mostly of in-class exercises.  They aim to help you remember the Python and pandas you learned in CS230 and be sure they’re refreshed and at the front of your mind, so that we can build on them in future weeks.</p>
<div class="section" id="python-review-1-remembering-pandas">
<h2><span class="section-number">4.1. </span>Python review 1: Remembering pandas<a class="headerlink" href="#python-review-1-remembering-pandas" title="Permalink to this headline">¶</a></h2>
<p>This first set of exercises works with a database from the U.S. Consumer Financial Protection Bureau.  The dataset recorded all mortgage applications in the U.S. in 2018, over 15,000,000 of them.  Here we will work with a sample of about 0.1% of that data, just over 15,000 entries.  These 15,000 entries are randomly sampled from just those applications that were for a conventional loan for a typical home purchase of a principal residence (i.e., not a rental property, not an office building, etc., just standard house or condo for an individual or family).</p>
<p><a href="../../_static/practice-project-dataset-1.csv">Download the dataset as a CSV file here.</a>  If you have questions about the meanings of any column in the dataset, they are fully documented <a class="reference external" href="https://ffiec.cfpb.gov/documentation/2018/lar-data-fields/">on the government website</a> from which I got the original (much larger) dataset.</p>
<div class="alert alert-secondary admonition">
<p class="admonition-title">Exercise 1</p>
<p>In class, we will work independently to perform the following tasks, using a cloud Jupyter provider such as Deepnote or Colab.</p>
<ol class="simple">
<li><p>Create a new project and name it something sensible, such as “MA346 Practice Project 1.”</p></li>
<li><p>Upload the data file into the project.</p></li>
<li><p>Start a new Jupyter notebook in the same project and load the data file into a pandas DataFrame in that notebook.</p></li>
<li><p>Explore the data using pandas’s built-in <code class="docutils literal notranslate"><span class="pre">info</span></code> and/or <code class="docutils literal notranslate"><span class="pre">head</span></code> methods.</p></li>
<li><p>The dataset has many columns we won’t use.  Drop all columns except for <code class="docutils literal notranslate"><span class="pre">interest_rate</span></code>, <code class="docutils literal notranslate"><span class="pre">property_value</span></code>, <code class="docutils literal notranslate"><span class="pre">state_code</span></code>, <code class="docutils literal notranslate"><span class="pre">tract_minority_population_percent</span></code>, <code class="docutils literal notranslate"><span class="pre">derived_race</span></code>, <code class="docutils literal notranslate"><span class="pre">derived_sex</span></code>, and <code class="docutils literal notranslate"><span class="pre">applicant_age</span></code>.</p></li>
<li><p>Reading a CSV file does not always ensure that columns are assigned the correct data type.  Use pandas’s built-in <code class="docutils literal notranslate"><span class="pre">astype</span></code> function to correct any columns that have the wrong data type.</p></li>
<li><p>Practice selecting just a subset of the DataFrame by trying each of these things:</p>
<ul class="simple">
<li><p>Define a new variable <code class="docutils literal notranslate"><span class="pre">female_applicants</span></code> that contains just the rows of the dataset containing mortgage applications from females.  How many are there?  What are the mean and median loan amounts for that group?</p></li>
<li><p>Repeat the previous bullet point, but for Asian applicants, stored in a variable named <code class="docutils literal notranslate"><span class="pre">asian_applicants</span></code>.</p></li>
<li><p>Repeat the previous bullet point, but for applicants whose age is 75 or over, stored in a variable <code class="docutils literal notranslate"><span class="pre">applicants_75_and_older</span></code>.</p></li>
</ul>
</li>
<li><p>Make your notebook presentable, using appropriate Markdown comments between cells to explain your code.  (Chapter 5 will cover best practices for how to write such comments, but do what you think is best for now.)</p></li>
<li><p>Use Deepnote or Colab’s publishing feature to create a shareable link to your notebook.  Paste that link into our class’s Microsoft Teams chat, so that we can share our work with one another and learn from each other’s work.</p></li>
</ol>
</div>
<div class="alert alert-danger admonition">
<p class="admonition-title">Learning on Your Own - Basic pandas work in Excel</p>
<p>Investigate the following questions.  A report on this topic would give complete answers to each.</p>
<ul class="simple">
<li><p>Which of the tasks in Exercise 1 are possible to do in Excel and which are not?</p></li>
<li><p>For those that are possible in Excel, what steps does the user take to do them?</p></li>
<li><p>Will the resulting Excel workbook continue to function correctly if the original data changes?</p></li>
<li><p>Which steps are more convenient in Excel and which are more convenient in Python and pandas, and why?</p></li>
</ul>
</div>
</div>
<div class="section" id="adding-a-new-column">
<h2><span class="section-number">4.2. </span>Adding a new column<a class="headerlink" href="#adding-a-new-column" title="Permalink to this headline">¶</a></h2>
<p>As you may recall from CS230, you can add new columns to a pandas DataFrame using code like the example below.  This example calculates how much interest the loan would accrue in the first year.  (This is not fully accurate, since of course the borrower would make some payments that year, but it’s just an example.)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;interest_first_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;property_value&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;interest_rate&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
</pre></div>
</div>
<p>Running this code in the notebook you’ve created would work just fine, and would create that new column.  It would have missing values for any rows that had missing property values or interest rates, naturally, but it would compute correct numerical values in all other rows.</p>
<p>But what happens if you try to run the same code, but just on the <code class="docutils literal notranslate"><span class="pre">female_applicants</span></code> DataFrame (or <code class="docutils literal notranslate"><span class="pre">asian_applicants</span></code> or <code class="docutils literal notranslate"><span class="pre">applicants_75_and_older</span></code>)?</p>
<div class="alert alert-primary admonition">
<p class="admonition-title">Big Picture - Writing to a slice of a DataFrame</p>
<p>The warning message you see when you attempt to run the code described above is an important one!  It relates to the difference between a DataFrame and a <em>view</em> of that DataFrame.  You can add columns to a DataFrame, but if you add to just a view, you’ll receive a warning.  We will discuss the details of this in class.</p>
</div>
</div>
<div class="section" id="what-if-you-don-t-remember-cs230-very-well">
<h2><span class="section-number">4.3. </span>What if you don’t remember CS230 very well?<a class="headerlink" href="#what-if-you-don-t-remember-cs230-very-well" title="Permalink to this headline">¶</a></h2>
<p>I have several recommendations of resources you can use:</p>
<div class="section" id="datacamp">
<h3><span class="section-number">4.3.1. </span>DataCamp<a class="headerlink" href="#datacamp" title="Permalink to this headline">¶</a></h3>
<p>I will regularly assign you exercises from <a class="reference external" href="http://www.datacamp.com">DataCamp</a>, some of which will review CS230 materials.  If you remember everything from CS230, the first few weeks of these exercises should be easy and quick for you.  If not, you will need to put in more time, but it will help you catch up.</p>
</div>
<div class="section" id="bentley-faculty">
<h3><span class="section-number">4.3.2. </span>Bentley faculty<a class="headerlink" href="#bentley-faculty" title="Permalink to this headline">¶</a></h3>
<p>I’m glad to meet with students who need help catching up on material from CS230 they may not remember.  Please feel free to come to office hours!</p>
<p>I know that Prof. Masloff, who teaches CS230, made an extensive set of course notes available to her students.  You may wish to review key portions of that document to help you stay caught up in MA346.  If you did not have Prof. Masloff, you might consider <a class="reference external" href="https://faculty.bentley.edu/details.asp?uname=jmasloff">contacting her</a> and asking for her course notes anyway.</p>
</div>
<div class="section" id="stack-overflow">
<h3><span class="section-number">4.3.3. </span>Stack Overflow<a class="headerlink" href="#stack-overflow" title="Permalink to this headline">¶</a></h3>
<p>The premiere question and answer website for technical subjects is <a class="reference external" href="https://stackoverflow.com/">Stack Overflow</a>.  You don’t need to visit the site, though; if you do a good Google search for any specific Python or pandas question, one of the top hits will almost alway be from Stack Overflow.  Here are a few tips to using it well:</p>
<ul class="simple">
<li><p>When you do a search, put as many specific words related to your question as possible.</p>
<ul>
<li><p>Be sure to mention Python, pandas, or whatever other libraries your question might touch upon.</p></li>
<li><p>If your question is about an error message, put the specific key words from the error message in your search.</p></li>
</ul>
</li>
<li><p>When viewing questions and answers on Stack Overflow, don’t read only the top answer.  A lower-ranked answer might actually be more suited to your specific needs.</p></li>
</ul>
</div>
<div class="section" id="o-reilly-books">
<h3><span class="section-number">4.3.4. </span>O’Reilly books<a class="headerlink" href="#o-reilly-books" title="Permalink to this headline">¶</a></h3>
<p>You have free access to O’Reilly Online Learning through the Bentley Library.  They are one of the top publishers of high-quality tutorial books on technical subjects.  To get started, <a class="reference external" href="https://www.oreilly.com/online-learning/try-now.html">visit this page and at the bottom choose to download a mobile app for your phone or tablet.</a></p>
<p>Then browse their book catalog and see what looks like it might be good for you.  I recommend starting here:</p>
<ul class="simple">
<li><p>Python Data Science Handbook by Jake VanderPlas, chapter 3 (or perhaps start earlier if you need to)</p></li>
<li><p>Python for Data Analysis by Wes McKinney, chapter 5 (or perhaps start earlier if you need to)</p></li>
</ul>
</div>
<div class="section" id="official-documentation">
<h3><span class="section-number">4.3.5. </span>Official documentation<a class="headerlink" href="#official-documentation" title="Permalink to this headline">¶</a></h3>
<p>Official documentation is used mostly for reference.  It does not make a good tutorial or lesson.  But it is the definitive reference, so I mention it here.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/">Python official documentation</a></p></li>
<li><p><a class="reference external" href="https://pandas.pydata.org/docs/">pandas official documentation</a></p></li>
</ul>
</div>
</div>
<div class="section" id="python-review-2-mathematical-exercises">
<h2><span class="section-number">4.4. </span>Python review 2: mathematical exercises<a class="headerlink" href="#python-review-2-mathematical-exercises" title="Permalink to this headline">¶</a></h2>
<p>As before, do these exercises in a new notebook in Deepnote or Colab, and when you’re done, share the link to the published version into our class’s Teams chat.</p>
<div class="alert alert-secondary admonition">
<p class="admonition-title">Exercise 2</p>
<p>If <span class="math notranslate nohighlight">\(r\)</span> is the annual interest rate and <span class="math notranslate nohighlight">\(P\)</span> is the principal, we’re all familiar with the standard formula for the present value after <span class="math notranslate nohighlight">\(n\)</span> periods, <span class="math notranslate nohighlight">\(P(1+r)^n\)</span>.  Write this as a Python function.  Also consider:</p>
<ol class="simple">
<li><p>How many inputs does it take and what are their data types?</p></li>
<li><p>What is the data type of its output?</p></li>
<li><p>Evaluate your function on <span class="math notranslate nohighlight">\(P=1,000\)</span>, <span class="math notranslate nohighlight">\(r=0.01\)</span>, and <span class="math notranslate nohighlight">\(n=7\)</span>.  Ensure you get approximately $1,072.14.</p></li>
</ol>
</div>
<div class="alert alert-secondary admonition">
<p class="admonition-title">Exercise 3</p>
<p>Create a pandas DataFrame with two columns.  The first column should be entitled F for Fahrenheit, and should contain the numbers from 0 to 100, counting by fives.  The next column should be entitled C for Celsius, and contain the corresponding temperature in degrees Celsius for the number in the first column.  Display the resulting table in the notebook.</p>
<p>Now try changing your work so that the result is a single pandas Series whose <em>index</em> is the Fahrenheit temperatures, and whose <em>values</em> are the Celsius temperatures.</p>
</div>
<div class="alert alert-secondary admonition">
<p class="admonition-title">Exercise 4</p>
<p>The NumPy function <code class="docutils literal notranslate"><span class="pre">np.random.randint(a,b)</span></code> picks a random integer between <span class="math notranslate nohighlight">\(a\)</span> and <span class="math notranslate nohighlight">\(b-1\)</span>.  Use that to create a function that behaves as follows:</p>
<ul class="simple">
<li><p>Your function takes as input a positive integer <span class="math notranslate nohighlight">\(n\)</span>, how many times to “roll the dice.”</p></li>
<li><p>Each roll of the dice simulates two dice being rolled (each with a number from 1 to 6) and adds the results together (thus generating a number between 2 and 12).</p></li>
<li><p>After all <span class="math notranslate nohighlight">\(n\)</span> rolls, return a pandas DataFrame with three columns:</p>
<ol class="simple">
<li><p>the numbers 2 through 12</p></li>
<li><p>the number of times that number showed up</p></li>
<li><p>the percentage of the time that number showed up</p></li>
</ol>
</li>
<li><p>Ensure the resulting DataFrame is sorted by its first column.</p></li>
</ul>
</div>
</div>
<div class="section" id="functional-style-code-vs-imperative-style-code">
<h2><span class="section-number">4.5. </span>Functional-style code vs. imperative-style code<a class="headerlink" href="#functional-style-code-vs-imperative-style-code" title="Permalink to this headline">¶</a></h2>
<p>As you wrote the functions above, you might have found yourself falling into one of two styles.  To see examples of each style, let’s consider the definition of the statistical concept of <em>variance.</em>  The variance of a list of data <span class="math notranslate nohighlight">\(x_1,\ldots,x_n\)</span> is defined to be</p>
<div class="math notranslate nohighlight">
\[\frac{\sum_{i=1}^{n} (x_i-\bar{x})^2}{n-1},\]</div>
<p>where we write <span class="math notranslate nohighlight">\(\bar{x}\)</span> to mean the mean of the data, and we pronounce it “<span class="math notranslate nohighlight">\(x\)</span> bar.”  If we take that function and convert it directly into Python, we might write it as follows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Coding style #1, &quot;functional&quot;</span>
<span class="k">def</span> <span class="nf">variance</span> <span class="p">(</span> <span class="n">data</span> <span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span> <span class="p">[</span> <span class="p">(</span> <span class="n">x</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span> <span class="p">]</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span>

<span class="n">test_data</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]</span>
<span class="n">variance</span><span class="p">(</span> <span class="n">test_data</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13.982142857142858
</pre></div>
</div>
</div>
</div>
<p>Although this function computes the variance of a list of data correctly, it piles up a lot of parentheses and brackets that some readers find unnecessarily confusing when reading code.  We can make the function less compact and more explanatory by breaking the nested parentheses into several different lines of code, each storing its result in a variable.  Here is an example.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Coding style #2, &quot;imperative&quot;</span>
<span class="k">def</span> <span class="nf">variance</span> <span class="p">(</span> <span class="n">data</span> <span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">xbar</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span> <span class="n">data</span> <span class="p">)</span>
    <span class="n">squared_differences</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span> <span class="n">x</span> <span class="o">-</span> <span class="n">xbar</span> <span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span> <span class="p">]</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span> <span class="n">squared_differences</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span>

<span class="n">variance</span><span class="p">(</span> <span class="n">test_data</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13.982142857142858
</pre></div>
</div>
</div>
</div>
<p>I call the first one <em>functional style</em> because we’re composing a lot of functions, each inside another.  I call the second one <em>imperative style</em> because the term “imperative” is used in programming to refer to lines of code that give the computer a command; here we’ve broken the formula out into three separate commands to create variables, followed by the final formula.</p>
<p>Neither of these two styles is always better than the other.  For a short formula, you probably just want to use functional style.  But for a long formula, imperative style has these advantages:</p>
<ul class="simple">
<li><p>You can use good, descriptive variable names to clarify for the reader of your code what it’s computing in each step.</p></li>
<li><p>If the code you’re writing isn’t inside a function, you can split imperative-style code over multiple cells, and put explanations in between.</p></li>
<li><p>If you know the reader of your code is new to coding (such as a new teammate in your organization) then imperative style gives them small pieces of code to digest one at a time, rather than a big pile of code they must understand all at once.</p></li>
</ul>
<p>So consider using each style for those situations that it fits best.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python392jvsc74a57bd098b0a9b7b4eaaa670588a142fd0a9b87eaafe866f1db4228be72b4211d12040f",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python392jvsc74a57bd098b0a9b7b4eaaa670588a142fd0a9b87eaafe866f1db4228be72b4211d12040f'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="chapter-3-jupyter.html" title="previous page"><span class="section-number">3. </span>Jupyter</a>
    <a class='right-next' id="next-link" href="chapter-5-before-and-after.html" title="next page"><span class="section-number">5. </span>Before and After</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Nathan Carter<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>